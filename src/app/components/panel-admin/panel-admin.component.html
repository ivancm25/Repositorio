<app-header></app-header>
<app-submenu></app-submenu>

<div *ngIf="classReference.esAdmin" class="container">
  <h2>Usuarios registrados:</h2>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Correo electrónico</th>
        <th>Opciones</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let item of usuarios">
        <td>{{item.id}}</td>
        <td>{{item.nombre}}</td>
        <td>{{item.apellido}}</td>
        <td>{{item.email}}</td>
        <td><button type="button" class="btn btn-danger" *ngIf="!comprobarAdmin(item)" (click)="eliminarUsuario(item)">Eliminar</button>
          <button type="button" class="btn btn-success" *ngIf="!comprobarAdmin(item)" (click)="editarUsuario(item)">Editar</button></td>
      </tr>
    </tbody>
  </table>

  <!-- Formulario editar usuario -->
  <div class="usuarioForm" *ngIf="verFormularioUsuario">
    <form [formGroup]="usuarioForm" (ngSubmit)="guardarUsuario()" class="modal-body">
      <div class="form-group">
        <label>Nombre</label>
        <input type="text" formControlName="nombre" class="form-control"/>
      </div>
      <div class="form-group">
        <label>Apellido</label>
        <input type="text" formControlName="apellido" class="form-control"/>
      </div>
      <div class="form-group">
        <label>Correo electrónico</label>
        <input type="text" formControlName="email" class="form-control"/>
      </div>
      <div class="form-group">
        <label>Contraseña</label>
        <input type="password" formControlName="contrasena" class="form-control"/>
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="usuarioForm.invalid">Actualizar</button>
    </form>
  </div>

  <!-- Apartamentos listados -->
  <h2>Apartamentos registrados:</h2>
    <table class="table" id="tabApartamentos">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Provincia</th>
          <th>Dirección</th>
          <th>Teléfono</th>
          <th>Precio</th>
          <th>Huéspedes máx.</th>
          <th>Mascotas</th>
          <th>Fumadores</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let item of apartamentos">
          <td>{{ item.id }}</td>
          <td>{{ item.nombre }}</td>
          <td>{{ item.provincia }}</td>
          <td>{{ item.direccion }}</td>
          <td>{{ item.tlf }}</td>
          <td>{{ item.precio }}</td>
          <td>{{ item.huespedes }}</td>
          <td>{{ item.mascotas }}</td>
          <td>{{ item.fumadores }}</td>
          <td>
            <button type="button" class="btn btn-danger" (click)="eliminarApartamento(item)">Eliminar</button>
            <button type="button" class="btn btn-success" (click)="editarApartamento(item)">Editar</button>
          </td>
        </tr>
      </tbody>
    </table>



    <!-- Formulario editar apartamento -->
    <div class="apartamentoForm" *ngIf="verFormularioApartamento">
      <h2>Editar apartamento</h2>
      <form [formGroup]="apartamentoForm" (ngSubmit)="guardarApartamento()">
        <div class="form-group">
          <label>Nombre</label>
          <input type="text" formControlName="nombre" class="form-control" />
        </div>
        <div class="form-group">
          <label>Provincia</label>
          <select required name="provincia" class="form-control" formControlName="provincia">
            <option value="A Coruña">A Coruña</option>
            <option value="Lugo">Lugo</option>
            <option value="Ourense">Ourense</option>
            <option value="Pontevedra">Pontevedra</option>
          </select>
        </div>
        <div class="form-group">
          <label>Dirección</label>
          <input type="text" formControlName="direccion" class="form-control" />
        </div>
        <div class="form-group">
          <label>Teléfono</label>
          <input type="number" formControlName="tlf" class="form-control" />
        </div>
        <div class="form-group">
          <label>Precio</label>
          <input type="number" formControlName="precio" class="form-control" />
        </div>
        <div class="form-group">
          <label>Huéspedes</label>
          <input type="number" formControlName="huespedes" class="form-control" />
        </div>
        <div class="form-check">
          <label class="form-check-label" for="mascotas">Permite mascotas?</label>
          <input class="form-check-input" type="checkbox" id="mascotas" formControlName="mascotas"/><br />

          <label class="form-check-label" for="fumadores">Permite fumadores?</label>
          <input class="form-check-input" type="checkbox" id="fumadores" formControlName="fumadores"/><br />
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="apartamentoForm.invalid">Actualizar</button>
      </form>
    </div>


  <h2>Casas rurales registradas:</h2>
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Provincia</th>
          <th>Dirección</th>
          <th>Teléfono</th>
          <th>Precio</th>
          <th>Huéspedes máx.</th>
          <th>Piscina</th>
          <th>Mascotas</th>
          <th>Fumadores</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let item of casasRurales">
          <td>{{item.id}}</td>
          <td>{{item.nombre}}</td>
          <td>{{item.provincia}}</td>
          <td>{{item.direccion}}</td>
          <td>{{item.tlf}}</td>
          <td>{{item.precio}}</td>
          <td>{{item.huespedes}}</td>
          <td>{{item.piscina}}</td>
          <td>{{item.mascotas}}</td>
          <td>{{item.fumadores}}</td>
          <td><button type="button" class="btn btn-danger" (click)="eliminarCasaRural(item)">Eliminar</button>
            <button type="button" class="btn btn-success" (click)="editarCasaRural(item)">Editar</button></td>
        </tr>
      </tbody>
    </table>


  <!-- Formulario para editar casa rural -->
  <div class="casaRuralForm" *ngIf="verFormularioCasaRural">
    <h2>Editar casa rural</h2>
    <form [formGroup]="casaRuralForm" (ngSubmit)="guardarCasaRural()">
    <div class="form-group">
      <label>Nombre</label>
      <input type="text" formControlName="nombre" class="form-control">
    </div>
    <div class="form-group">
      <label>Provincia</label>
      <select required name="provincia" class="form-control" formControlName="provincia">
        <option value="A Coruña">A Coruña</option>
        <option value="Lugo">Lugo</option>
        <option value="Ourense">Ourense</option>
        <option value="Pontevedra">Pontevedra</option>
      </select>
    </div>
    <div class="form-group">
      <label>Dirección</label>
      <input type="text" formControlName="direccion" class="form-control">
    </div>
    <div class="form-group">
      <label>Teléfono</label>
      <input type="number" formControlName="tlf" class="form-control">
    </div>
    <div class="form-group">
      <label>Precio</label>
      <input type="number" formControlName="precio" class="form-control">
    </div>
    <div class="form-group">
      <label>Huéspedes</label>
      <input type="number" formControlName="huespedes" class="form-control">
    </div>
    <div class="form-check">
      <label class="form-check-label" for="piscina">Tiene piscina?</label>
      <input class="form-check-input" type="checkbox" id="piscina" formControlName="piscina"/><br />

      <label class="form-check-label" for="mascotas">Permite mascotas?</label>
      <input class="form-check-input" type="checkbox" id="mascotas" formControlName="mascotas"/><br />

      <label class="form-check-label" for="fumadores">Permite fumadores?</label>
      <input class="form-check-input" type="checkbox" id="fumadores" formControlName="fumadores"/><br />
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="casaRuralForm.invalid">Actualizar</button>
  </form>
  </div>


  <h2>Reservas registradas:</h2>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Correo electrónico usuario</th>
        <th>Fecha realizada</th>
        <th>Fecha entrada</th>
        <th>Fecha salida</th>
        <th>Precio</th>
        <th>Alojamiento</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let item of reservas">
        <td>{{item.id}}</td>
        <td>{{item.usuario.email}}</td>
        <td>{{item.fechaRealizada}}</td>
        <td>{{item.fechaEntrada}}</td>
        <td>{{item.fechaSalida}}</td>
        <td>{{item.precio}}</td>
        <td>{{item.apartamento.nombre}}</td>
        <td><button type="button" class="btn btn-danger" (click)="eliminarReserva(item)">Eliminar</button></td>
      </tr>
    </tbody>
  </table>


  <h2>Hoteles registrados:</h2>
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Provincia</th>
          <th>Dirección</th>
          <th>Teléfono</th>
          <th>Habitaciones</th>
          <th>Piscina</th>
          <th>Fumadores</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let item of hoteles">
          <td>{{item.id}}</td>
          <td>{{item.nombre}}</td>
          <td>{{item.provincia}}</td>
          <td>{{item.direccion}}</td>
          <td>{{item.tlf}}</td>
          <td>{{item.habitaciones}}</td>
          <td>{{item.piscina}}</td>
          <td>{{item.fumadores}}</td>
          <td><button type="button" class="btn btn-danger" (click)="eliminarHotel(item)">Eliminar</button>
            <button type="button" class="btn btn-success" (click)="editarHotel(item)">Editar</button></td>
        </tr>
      </tbody>
    </table>


    <!-- Formulario para editar hotel -->
  <div class="hotelForm" *ngIf="verFormularioHotel">
    <h2>Editar hotel</h2>
    <form [formGroup]="hotelForm" (ngSubmit)="guardarHotel()">
    <div class="form-group">
      <label>Nombre</label>
      <input type="text" formControlName="nombre" class="form-control">
    </div>
    <div class="form-group">
      <label>Provincia</label>
      <select required name="provincia" class="form-control" formControlName="provincia">
        <option value="A Coruña">A Coruña</option>
        <option value="Lugo">Lugo</option>
        <option value="Ourense">Ourense</option>
        <option value="Pontevedra">Pontevedra</option>
      </select>
    </div>
    <div class="form-group">
      <label>Dirección</label>
      <input type="text" formControlName="direccion" class="form-control">
    </div>
    <div class="form-group">
      <label>Teléfono</label>
      <input type="number" formControlName="tlf" class="form-control">
    </div>
    <div class="form-group">
      <label>Habitaciones</label>
      <input type="number" formControlName="habitaciones" class="form-control">
    </div>
    <div class="form-check">
      <label class="form-check-label" for="piscina">Tiene piscina?</label>
      <input class="form-check-input" type="checkbox" id="piscina" formControlName="piscina"/><br />

      <label class="form-check-label" for="fumadores">Permite fumadores?</label>
      <input class="form-check-input" type="checkbox" id="fumadores" formControlName="fumadores"/><br />
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="hotelForm.invalid">Actualizar</button>
  </form>
  </div>


    <h2>Habitaciones registradas:</h2>
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Hotel</th>
          <th>Precio</th>
          <th>Huéspedes</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let item of habitaciones">
          <td>{{item.id}}</td>
          <td>{{item.nombre}}</td>
          <td>{{item.hotel}}</td>
          <td>{{item.precio}}</td>
          <td>{{item.huespedes}}</td>
          <td><button type="button" class="btn btn-danger" (click)="eliminarHabitacion(item)">Eliminar</button>
            <button type="button" class="btn btn-success" (click)="editarHabitacion(item)">Editar</button></td>
        </tr>
      </tbody>
    </table>


    <div class="habitacionForm" *ngIf="verFormularioHabitacion">
      <h2>Editar habitación</h2>
      <form [formGroup]="habitacionForm" (ngSubmit)="guardarHabitacion()">
      <div class="form-group">
        <label>Nombre</label>
        <input type="text" formControlName="nombre" class="form-control">
      </div>
      <div class="form-group">
        <label>Hotel perteneciente</label>
        <select name="hotel" id="hotel" formControlName="hotel" class="form-control">
          <option *ngFor="let item of hoteles" value={{item.nombre}}>{{item.nombre}}</option>
        </select>
      </div>
      <div class="form-group">
        <label>Precio</label>
        <input type="number" formControlName="precio" class="form-control">
      </div>
      <div class="form-group">
        <label>Huéspedes</label>
        <input type="number" formControlName="huespedes" class="form-control">
      </div>

      <button type="submit" class="btn btn-primary">Actualizar</button>
    </form>
    </div>

</div>

<div *ngIf="!classReference.esAdmin">
  <h1>Vuelve cuando seas admin</h1>
</div>

<app-footer></app-footer>
